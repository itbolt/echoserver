<!DOCTYPE html>
<html>
<head>
    <title>Home Page</title>
</head>
<body>
    <h1>Welcome to Echo Server!</h1>
    <p>Type your message below:</p>
    <form action="/echo" method="POST">
        <input type="text" name="message" />
        <button type="submit">Submit</button>
    </form>
    {% if response %}
        <h2>Response:</h2>
        <p>{{ response }}</p>
    {% endif %}


    <p>Ask ChatGPT something:</p>
    <form action="/chat" method="POST">
        <input type="text" name="message" />
        <button type="submit">Submit</button>
    </form>
    {% if response1 %}
        <h2>Response:</h2>
        <p>{{ response1 }}</p>
        <button onclick="sendFeedback('like', 'response1')">Like</button>
    <button onclick="sendFeedback('dislike', 'response1')">Dislike</button>
    {% endif %}    

    <script>
        function sendFeedback(reaction, responseElementId) {
            // Get the user's question and ChatGPT response from the page
            var question = document.getElementsByName('message')[1].value;
            var response = document.getElementById(responseElementId).textContent;

            // Send the user's question, ChatGPT response, and reaction to the server
            fetch('/store_feedback', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    'question': question,
                    'response': response,
                    'reaction': reaction
                })
            });
        }
    </script>

</body>
</html>