<!DOCTYPE html>
<html>
<head>
    <title>Home Page</title>
</head>
<body>
    <h1>Welcome to Echo Server!</h1>
    <p>Type your message below:</p>
    <form action="/echo" method="POST">
        <input type="text" name="message" />
        <button type="submit">Submit</button>
    </form>
    {% if response1 %}
        <h2>Response:</h2>
        <p>{{ response1 }}</p>
    {% endif %}


    <p>Ask ChatGPT something:</p>
    <form action="/chat" method="POST">
        <input type="text" name="message" />
        <button type="submit">Submit</button>
    </form>
    {% if response %}
        <h2>Response:</h2>
        <p>{{ response }}</p>
        <button id="likeButton">Like</button>
        <button id="dislikeButton">Dislike</button>
        <input type="text" id="commentInput" placeholder="Comment"/><button id="submitCommentButton">Submit Comment</button>

        <script>
            document.getElementById("likeButton").addEventListener("click", function() {
                console.log("Like button clicked");
                // Send the "like" response to the server
                sendFeedback("like");
            });
    
            document.getElementById("dislikeButton").addEventListener("click", function() {
                console.log("Dislike button clicked");
                // Send the "dislike" response to the server
                sendFeedback("dislike");
            });

            document.getElementById("submitCommentButton").addEventListener("click", function() {
                console.log("Submit Comment button clicked");
                sendComment();
            });
            
            function sendComment() {
                var comment = document.getElementById("commentInput").value;

                fetch("/comment", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        "comment": comment
                    })
                })
                .then(response => response.json())
                .then(data => {
                    console.log("Comment submitted:", data);
                })
                .catch(error => {
                    console.error("Error:", error);
                });
            }

            function sendFeedback(reaction) {
                // Send the data to the server using the Fetch API

                fetch("/feedback", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        "reaction": reaction,
                    })
                })
                .then(response => response.json())
                .then(data => {
                    console.log("Feedback sent successfully.", data);
                })
                .catch(error => {
                    console.error("Error:", error);
                });
            }
        </script>
    {% endif %}    

</body>
</html>